;;; -*- mode : lisp -*-
(in-package :staticl-user)

(ql:quickload (list "staticl/format/spinneret"
                    "dexador"
                    "github"
                    "secret-values"
                    "jonathan"))


(site "40Ants"
      :description "Just an example of the static file generated by StatiCL."
      :url "https://40ants.com/"
      :navigation (menu (item "Blog" "/posts/")
                        ;; (item "Blog (RU)" "/ru/posts/")
                        (item "Lisp Tips" "/tips/")
                        (item "Our Projects" "/projects/")
                        (item "About" "/about/"))
      :pipeline (list (load-content)
                      (filter (:path "ru/")
                              (prev-next-links)
                              (tags-index :target-path #P"ru/tag/")
                              (paginated-index :target-path #P"ru/posts/"
                                               :page-title-fn (lambda (num)
                                                                (fmt "Страница ~A" num)))
                              (rss :target-path #P"ru/posts/rss.xml")
                              (atom :target-path #P"ru/posts/atom.xml"))
                      (filter (:path "ru/" :invert t)
                              (prev-next-links)
                              (tags-index :target-path #P"tag/")
                              (paginated-index :target-path #P"posts/")
                              (rss :target-path #P"posts/rss.xml")
                              (atom :target-path #P"posts/atom.xml"))
                      (sitemap)
                      ;; (rsync "my-site")
                      )
      :theme "the40ants"
      ;; :theme "hyde"
      )
